{"version":3,"sources":["../../src/phone/phone.service.ts"],"sourcesContent":["import { Injectable, Logger } from '@nestjs/common';\r\nimport axios from 'axios';\r\nimport { AIService } from '../ai/ai.service';\r\nimport { InternetSearchService } from '../search/search.service';\r\nimport { DomainService } from '../domain/domain.service';\r\nimport { VoiceRecognitionService } from '../voice/voice.service';\r\n\r\n// ‚≠ê ABSOLUTE BULLETPROOF IMPORT - No TypeScript issues\r\nlet WebSocket: any;\r\n\r\n@Injectable()\r\nexport class PhoneService {\r\n  private readonly logger = new Logger(PhoneService.name);\r\n  private readonly apiKey = process.env.OPENAI_API_KEY!;\r\n  private sockets = new Map<string, any>();\r\n  private activeInstructions = new Map<string, string>();\r\n\r\n  constructor(\r\n    private readonly aiService: AIService,\r\n    private readonly searchService: InternetSearchService,\r\n    private readonly domainService: DomainService,\r\n    private readonly voiceService: VoiceRecognitionService,\r\n  ) {\r\n    // ‚≠ê Dynamically require at runtime\r\n    WebSocket = require('ws');\r\n  }\r\n\r\n  private get authHeader() {\r\n    return { Authorization: `Bearer ${this.apiKey}` };\r\n  }\r\n\r\n  async acceptCall(callId: string, opts?: { instructions?: string; model?: string }) {\r\n    // Get enhanced instructions using AI service\r\n    const enhancedInstructions = await this.getEnhancedInstructions(\r\n      callId,\r\n      opts?.instructions || `Hello! Thanks for calling. How can I help you today?`,\r\n    );\r\n\r\n    const body = {\r\n      type: 'realtime',\r\n      model: opts?.model || 'gpt-4-realtime-preview-2024-12-17',\r\n      output_modalities: ['audio'],\r\n      audio: {\r\n        input: { format: 'pcm16', turn_detection: { type: 'semantic_vad', create_response: true } },\r\n        output: { format: 'g711_ulaw', voice: 'coral', speed: 1.0 },\r\n      },\r\n      instructions: enhancedInstructions,\r\n    };\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        `https://api.openai.com/v1/realtime/calls/${callId}/accept`,\r\n        body,\r\n        { headers: { ...this.authHeader, 'Content-Type': 'application/json' } },\r\n      );\r\n      this.activeInstructions.set(callId, enhancedInstructions);\r\n      this.logger.log(`‚úÖ Call ${callId} accepted with AI-enhanced instructions`);\r\n      return response.data;\r\n    } catch (e: any) {\r\n      this.logger.error(`‚ùå Error:`, e.message);\r\n      throw e;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get AI-enhanced instructions with all capabilities\r\n   */\r\n  private async getEnhancedInstructions(callId: string, baseInstructions: string): Promise<string> {\r\n    this.aiService.initializeConversation(callId, {\r\n      startTime: new Date(),\r\n      capabilities: ['search', 'domain_check', 'voice_analysis'],\r\n    });\r\n\r\n    const instructions = `${baseInstructions}\r\n\r\nIMPORTANT CAPABILITIES:\r\n1. HUMAN-LIKE CONVERSATION: Engage naturally, show empathy, remember context from this conversation.\r\n2. INTERNET SEARCH: When asked about current events, weather, news, or unknown information, mention you can search for real-time data.\r\n3. DOMAIN ASSISTANCE: If caller asks about domain availability, registration, or suggestions, offer to check domain status.\r\n4. VOICE ANALYSIS: Continuously monitor conversation sentiment and intent.\r\n5. MEMORY: Remember all details shared in this conversation and reference them naturally.\r\n\r\nINSTRUCTIONS:\r\n- Be conversational and natural, like talking to a helpful friend\r\n- Ask clarifying questions when needed\r\n- Remember and reference information from earlier in the conversation\r\n- Offer relevant services based on caller needs\r\n- Provide accurate, helpful information\r\n- Be professional but warm and friendly\r\n- Handle multiple topics smoothly\r\n- Keep responses concise for phone conversation`;\r\n\r\n    return instructions;\r\n  }\r\n\r\n  async connect(callId: string) {\r\n    const url = `wss://api.openai.com/v1/realtime?call_id=${encodeURIComponent(callId)}`;\r\n\r\n    // ‚≠ê WebSocket is now guaranteed to be defined\r\n    const ws = new WebSocket(url, {\r\n      headers: this.authHeader,\r\n    });\r\n\r\n    this.sockets.set(callId, ws);\r\n\r\n    ws.on('open', () => {\r\n      this.logger.log(`‚úÖ WebSocket OPEN for ${callId}`);\r\n      // No greeting needed - OpenAI handles it\r\n    });\r\n\r\n    ws.on('message', (data: any) => {\r\n      this.logger.debug(`üì® Message from ${callId}:`, data.toString());\r\n    });\r\n\r\n    ws.on('close', () => {\r\n      this.logger.log(`üîå WebSocket CLOSED for ${callId}`);\r\n      this.sockets.delete(callId);\r\n    });\r\n\r\n    ws.on('error', (err: any) => {\r\n      this.logger.error(`‚ùå WebSocket ERROR:`, err.message);\r\n    });\r\n  }\r\n\r\n  async handleIncomingCall(callId: string) {\r\n    this.logger.log(`üìû Handling call: ${callId}`);\r\n    \r\n    // Initialize AI conversation memory\r\n    this.aiService.initializeConversation(callId, {\r\n      startTime: new Date(),\r\n      callId,\r\n      features: {\r\n        searchEnabled: true,\r\n        domainCheckEnabled: true,\r\n        voiceAnalysisEnabled: true,\r\n        memoryEnabled: true,\r\n      },\r\n    });\r\n    \r\n    await this.acceptCall(callId);\r\n    \r\n    setImmediate(() => {\r\n      this.connect(callId).catch((e: any) =>\r\n        this.logger.error(`‚ùå WebSocket failed:`, e.message)\r\n      );\r\n    });\r\n\r\n    return {\r\n      control: {\r\n        action: 'accept',\r\n        parameters: {\r\n          voice: 'coral',\r\n          instructions: await this.getEnhancedInstructions(\r\n            callId,\r\n            `Welcome! I'm an AI assistant with advanced capabilities. I can help you search for information, check domain availability, and more. How can I assist you today?`,\r\n          ),\r\n          turn_detection: { type: 'server_vad' }\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Search for information during call\r\n   */\r\n  async searchDuringCall(callId: string, query: string): Promise<string> {\r\n    this.logger.log(`üîç Searching for: \"${query}\" during call ${callId}`);\r\n    \r\n    const results = await this.searchService.getRelevantInfo(query, 3);\r\n    \r\n    // Update conversation context\r\n    this.aiService.updateContext(callId, {\r\n      lastSearch: query,\r\n      searchResults: results,\r\n      searchTime: new Date(),\r\n    });\r\n\r\n    return results;\r\n  }\r\n\r\n  /**\r\n   * Check domain during call\r\n   */\r\n  async checkDomainDuringCall(callId: string, domain: string): Promise<string> {\r\n    this.logger.log(`üåê Checking domain: \"${domain}\" during call ${callId}`);\r\n    \r\n    const summary = await this.domainService.getDomainSummary(domain);\r\n    \r\n    // Update conversation context\r\n    this.aiService.updateContext(callId, {\r\n      lastDomainCheck: domain,\r\n      domainStatus: summary,\r\n      domainCheckTime: new Date(),\r\n    });\r\n\r\n    return summary;\r\n  }\r\n\r\n  /**\r\n   * Analyze voice during call\r\n   */\r\n  async analyzeVoiceDuringCall(\r\n    callId: string,\r\n    transcription: string,\r\n    audioMetrics?: any,\r\n  ): Promise<string> {\r\n    this.logger.log(`üé§ Analyzing voice for call ${callId}`);\r\n    \r\n    const analysis = this.voiceService.analyzeSpeech(transcription, audioMetrics);\r\n    const recommendations = this.voiceService.getVoiceRecommendations(analysis);\r\n    \r\n    // Update conversation context\r\n    this.aiService.updateContext(callId, {\r\n      lastAnalysis: analysis,\r\n      voiceRecommendations: recommendations,\r\n      sentiment: analysis.sentiment,\r\n      intent: analysis.intent,\r\n      analysisTime: new Date(),\r\n    });\r\n\r\n    this.logger.log(`Analysis - Intent: ${analysis.intent}, Sentiment: ${analysis.sentiment}`);\r\n    \r\n    if (recommendations.length > 0) {\r\n      this.logger.log(`Recommendations: ${recommendations.join(', ')}`);\r\n    }\r\n\r\n    return JSON.stringify(analysis, null, 2);\r\n  }\r\n\r\n  /**\r\n   * Get call summary\r\n   */\r\n  getCallSummary(callId: string): string {\r\n    const memory = this.aiService.getMemory(callId);\r\n    if (!memory) return 'No call data available';\r\n\r\n    const summary = this.aiService.getConversationSummary(callId);\r\n    const duration = new Date().getTime() - memory.startTime.getTime();\r\n    const durationMinutes = (duration / 1000 / 60).toFixed(2);\r\n\r\n    return `\r\n=== CALL SUMMARY ===\r\nCall ID: ${callId}\r\nDuration: ${durationMinutes} minutes\r\nStarted: ${memory.startTime.toISOString()}\r\n\r\nCONVERSATION:\r\n${summary}\r\n\r\nCONTEXT:\r\n${JSON.stringify(memory.context, null, 2)}\r\n    `;\r\n  }\r\n\r\n  async terminateCall(callId: string) {\r\n    try {\r\n      // Generate call summary\r\n      const summary = this.getCallSummary(callId);\r\n      this.logger.log(`\\n${summary}`);\r\n\r\n      // Clean up conversation memory\r\n      this.aiService.clearMemory(callId);\r\n      this.activeInstructions.delete(callId);\r\n\r\n      await axios.post(\r\n        `https://api.openai.com/v1/realtime/calls/${callId}/hangup`,\r\n        null,\r\n        { headers: { Authorization: `Bearer ${this.apiKey}`, 'Content-Type': 'application/json' } },\r\n      );\r\n      this.logger.log(`‚úÖ Call ${callId} terminated`);\r\n      return { ok: true, summary };\r\n    } catch (e: any) {\r\n      this.logger.error(`‚ùå Hangup failed:`, e.message);\r\n      return { ok: false, error: e.message };\r\n    }\r\n  }\r\n\r\n  close(callId: string) {\r\n    const sock = this.sockets.get(callId);\r\n    if (sock && sock.readyState === 1) sock.close(1000, 'done');\r\n    this.sockets.delete(callId);\r\n  }\r\n}"],"names":["PhoneService","WebSocket","authHeader","Authorization","apiKey","acceptCall","callId","opts","enhancedInstructions","getEnhancedInstructions","instructions","body","type","model","output_modalities","audio","input","format","turn_detection","create_response","output","voice","speed","response","axios","post","headers","activeInstructions","set","logger","log","data","e","error","message","baseInstructions","aiService","initializeConversation","startTime","Date","capabilities","connect","url","encodeURIComponent","ws","sockets","on","debug","toString","delete","err","handleIncomingCall","features","searchEnabled","domainCheckEnabled","voiceAnalysisEnabled","memoryEnabled","setImmediate","catch","control","action","parameters","searchDuringCall","query","results","searchService","getRelevantInfo","updateContext","lastSearch","searchResults","searchTime","checkDomainDuringCall","domain","summary","domainService","getDomainSummary","lastDomainCheck","domainStatus","domainCheckTime","analyzeVoiceDuringCall","transcription","audioMetrics","analysis","voiceService","analyzeSpeech","recommendations","getVoiceRecommendations","lastAnalysis","voiceRecommendations","sentiment","intent","analysisTime","length","join","JSON","stringify","getCallSummary","memory","getMemory","getConversationSummary","duration","getTime","durationMinutes","toFixed","toISOString","context","terminateCall","clearMemory","ok","close","sock","get","readyState","Logger","name","process","env","OPENAI_API_KEY","Map","require"],"mappings":"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"}